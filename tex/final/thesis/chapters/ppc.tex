\chapter{Έλεγχος προδιαγεγραμμένης απόκρισης εξόδου}
\label{chap:ppc}

Καθ' όλη αυτή την εργασία, με τον όρο προδιαγεγραμμένη απόκριση εξόδου (ΠΑΕ) (γνωστός και ως \textlatin{\emph{prescribed performance control (PPC)}} στη ξενόγλωσση βιβλιογραφία), αναφερόμαστε στο ότι το σφάλμα παρακολούθησης εξόδου θα συγκλίνει σε μια προαποφασισμένη και οσοδήποτε μικρή περιοχή του μηδενός με προεπιλεγμένη ταχύτητα και υπερύψωση. Σε αυτό το κεφάλαιο παρουσιάζουμε μια θεμελίωση και την αρχή λειτουργίας του ελέγχου ΠΑΕ, που πρωτοεμφανίστηκε στην εργασία~\cite{bechlioulis2008robust}, με σκοπό να επιβάλει αυτά τα χαρακτηριστικά σε συστήματα κλειστού βρόγχου. Προχωρώντας σε μια μαθηματική θεώρηση αυτής της ιδέας, έστω το γενικό μη-γραμμικό σύστημα
\begin{equation}
    \label{eq:ppc general system}
    \begin{split}
        \dot x &= f(t, x, u)\\
        y &= h(x)
    \end{split}
\end{equation}
όπου το $x \in \R^n$ αποτελεί το διάνυσμα των καταστάσεων, $u \in \R^m$ είναι η είσοδος ελέγχου, $y \in \R^p$ είναι το διάνυσμα εξόδων και τα διανυσματικά πεδία $f: \R^+ \times \R^n \times \R^m \rightarrow \R^n$, $h: \R^n \rightarrow \R^p$ είναι τοπικά \lip\ στα ορίσματά τους. Έστω επίσης και η αρκούντως ομαλή και φραγμένη τροχιά παρακολούθησης
\[
    y_d(t) = \bmqty{y_d^1(t) & y_d^2(t) & \cdots & y_d^p(t)}^\T
\]
της οποίας οι παράγωγοι μέχρι αρκούντως τάξης είναι επίσης φραγμένες. Επιθυμούμε η έξοδος του \cref{eq:ppc general system} να παρακολουθεί την επιθυμητή τροχιά $y_d(t)$ με προδιαγεγραμμένο τρόπο, δηλαδή τα σφάλματα παρακολούθησης
\[
    e_i(t) = y_i(t) - y_d^i(t)\qc i = 1, \ldots, p
\]
να συγκλίνουν σε μια προκαθορισμένη τελική περιοχή του μηδενός, με ρυθμό σύγκλισης τουλάχιστον όσο μία προαποφασισμένη τιμή και υπερύψωση μικρότερη από μια προεπιλεγμένη σταθερά.

\begin{figure}[t]
    \selectlanguage{english}
    \centering
    \input{figures/ppc/perf_functions.tikz}
    \selectlanguage{greek}
    \caption{Η γραφική απεικόνιση της σχέσης \cref{eq:ppc ineq1} για $e_i(0) > 0$ (άνω) και $e_i(0) < 0$ (κάτω).}
    \label{fig:ppc_perf_functions}
\end{figure}

Η μαθηματική περιγραφή των κριτηρίων απόκρισης μπορεί να γίνει με τις παρακάτω ανισότητες:
\begin{subequations}
    \label{eq:ppc ineq1}                
    \begin{align}
        \label{eq:ineq1a}
        -M_i\rho_i(t) < e_i(t) < \rho_i(t) \qc\qq*{αν} e_i(0)\geq 0,\\
        \label{eq:ineq1b}
        -\rho_i(t) < e_i(t) < M_i\rho_i(t) \qc\qq*{αν} e_i(0)\leq 0,
    \end{align}
\end{subequations}
για $i = 1, \ldots, p$, για κάθε $t \geq 0$, όπου τα $M_i$ ικανοποιεί $0 \leq M_i \leq 1$, και οι $\rho_i(t)$ αποτελούν φραγμένες, θετικές, και γνησίως φθίνουσες συναρτήσεις που ικανοποιούν τη σχέση $\lim_{t \rightarrow \infty}\rho(t) > 0$, τις οποίες θα ονομάσουμε \emph{συναρτήσεις επίδοσης}. Στο \cref{fig:ppc_perf_functions} απεικονίζεται γραφικά η φιλοσοφία του ελέγχου ΠΑΕ για μία εκθετική συνάρτηση επίδοσης $\rho_i(t) = (\rho_0^i - \rho_\infty^i) \exp(-\lambda_i t) + \rho_\infty^i$, όπου $\rho_0^i$, $\rho_\infty^i$, και $\lambda_i$ είναι θετικές, προεπιλεγμένες σταθερές. Η σκιαγραφημένη περιοχή είναι το χωρίο στο οποίο επιτρέπεται να εξελιχθεί το σφάλμα $e_i(t)$. Δεδομένης οποιασδήποτε αρχικής συνθήκης $e_i(0)$, η σταθερά $\rho_0^i = \rho_i(0)$ επιλέγεται ώστε να ικανοποιεί τη σχέση $\rho_0^i > e_i(0)$ όταν $e_i(0) > 0$ ή $-\rho_0^i < e_i(0)$ όταν $e_i(0) < 0$. Αντιθέτως, στην περίπτωση που $e_i(0) = 0$, τότε θέτουμε $M_i \neq 0$ για οποιοδήποτε $\rho_0^i$. Επιπλέον, η παράμετρος $\rho_\infty^i = \lim_{t \rightarrow \infty} \rho_i(t)$ αναπαριστά το μέγιστο σφάλμα εξόδου στη μόνιμη κατάσταση και μπορεί να τεθεί αρκούντως μικρή όσο και η ακρίβεια του μετρητικού οργάνου, πετυχαίνοντας \emph{πρακτικά} ασυμπτωτική σύγκλιση του σφάλματος στο μηδέν. Επίσης, ο ρυθμός μείωσης της $\rho_i(t)$, που εδώ καθορίζεται από το $\lambda_i$, ορίζει μια ελάχιστη ταχύτητα σύγκλισης του σφάλματος εξόδου, ενώ η μέγιστη υπερύψωση του προδιαγράφεται μικρότερη από την τιμή $M_i \rho_0^i$, η οποία μπορεί να μηδενιστεί αν επιπλέον θέσουμε $M_i = 0$. Συνεπώς, με την κατάλληλη επιλογή των παραμέτρων $M_i$, $\rho_i(t)$, $i = 1, \ldots, p$, μπορούμε μέσω των ανισοτήτων \cref{eq:ppc ineq1} να περιγράψουμε επαρκώς κριτήρια απόκρισης των σφαλμάτων παρακολούθησης εξόδου τόσο για τη μεταβατική περίοδο όσο και για τη μόνιμη κατάσταση.

\begin{figure}[t]
    \selectlanguage{english}
    \centering
    \input{figures/ppc/transformation.tikz}
    \selectlanguage{greek}
    \caption{Η γραφική απεικόνιση της συνάρτησης μετασχηματισμού \cref{eq:transformation_definition} για $e_i(0) > 0$ (αριστερά) και $e_i(0) < 0$ (δεξιά).}
    \label{fig:ppc_transformation}
\end{figure}

Σημείο κλειδί για τον έλεγχο ΠΑΕ, είναι η εφαρμογή ενός μετασχηματισμού των σφαλμάτων $e_i(t)$, ο οποίος διαμορφώνει αναφορικά με τα χαρακτηριστικά απόκρισης, όπως αυτά περιγράφονται από τις αντίστοιχες συναρτήσεις επίδοσης $\rho_i(t)$, και τις σταθερές $M_i$. Συγκεκριμένα, ορίζουμε τα μετασχηματισμένα σφάλματα
\[
    \varepsilon_i(t) = T_i \pqty{\frac{e_i(t)}{\rho_i(t)}} \qc i =1, \ldots, p
\]
όπου $T_i(\cdot)$ αποτελούν ομαλές και γνησίως αύξουσες συναρτήσεις που ορίζουν ένα προς ένα και επί απεικονίσεις:
\begin{subequations}
    \label[equation]{eq:transformation_mapping}                
    \begin{align}
        T_i: (-M_i, 1) \rightarrow \R \qc \qq*{αν} e_i(0)\geq 0,\\
        T_i: (-1, M_i) \rightarrow \R \qc \qq*{αν} e_i(0)\leq 0,
    \end{align}
\end{subequations}
με την επιπλέον ιδιότητα ότι υπάρχει μια αυστηρά θετική σταθερά $\ubar d_i$ τέτοια ώστε
\begin{equation*}
    \label{eq:transformation_derivative_lower_bound}
    \dv{T_i (\flatfrac{e_i}{\rho_i})}{(\flatfrac{e_i}{\rho_i})} \geq \ubar d_i > 0.
\end{equation*}
Μία υποψήφια συνάρτηση μετασχηματισμού με τις προαναφερθείσες ιδιότητες είναι η ακόλουθη:
\begin{subequations}
    \label{eq:transformation_definition}                
    \begin{align}
        T_i = \ln\left(\frac{M_i + \flatfrac{e_i}{\rho_i}}{1 - \flatfrac{e_i}{\rho_i}}\right)
            \qc \qq*{αν} e_i(0)\geq 0,\\
        T_i = \ln\left(\frac{1 + \flatfrac{e_i}{\rho_i}}{M_i - \flatfrac{e_i}{\rho_i}}\right)
            \qc \qq*{αν} e_i(0)\leq 0,
    \end{align}
\end{subequations}
η οποία απεικονίζεται γραφικά στο \cref{fig:ppc_transformation}.

Έστω το διάνυσμα $e = \col(e_1, \ldots, e_p)$. Με $\Omega_i$ θα συμβολίζουμε το πεδίο ορισμού του $T_i$ και θεωρούμε την ένα προς ένα και επί, συνεχή απεικόνιση, με επίσης συνεχή αντίστροφο (δηλαδή έναν ομοιομορφισμό) $T: \Omega \rightarrow \R^p$ που ορίζουμε ως
\[
    T \pqty{\Rho^{-1} e} = \bmqty{T_1 \pqty{\frac{e_1}{\rho_1}} & \cdots & T_p \pqty{\frac{e_p}{\rho_p}}}^\T,
\]
όπου $\Rho(t) = \diag\pqty{\rho_1(t), \ldots, \rho_p(t)}$. Από την \cref{eq:transformation_mapping} είναι προφανές πως η επιλογή του $T_i$ εξαρτάται μονάχα από το πρόσημο του $e_i(0)$. Θεωρούμε το διάνυσμα των μετασχηματισμένων σφαλμάτων $\varepsilon = \col\pqty{\varepsilon_1, \ldots, \varepsilon_p}$, το οποίο παραγωγίζουμε ως προς το χρόνο και έχουμε:
\[
    \dot \varepsilon = D \pqty{\dot e - \dot \Rho \Rho^{-1} e}
\]
όπου
\[
    D = \diag\left(
    \dv{T_1 (\flatfrac{e_1}{\rho_1})}{(\flatfrac{e_1}{\rho_1})}
    \frac{1}{\rho_1}, \ldots, 
    \dv{T_p (\flatfrac{e_p}{\rho_p})}{(\flatfrac{e_p}{\rho_p})}
    \frac{1}{\rho_p} \right).
\]
Εξαιτίας της φύσης του μετασχηματισμού, προδιαγεγραμμένη απόκριση εξόδου όπως ορίζεται από την \cref{eq:ppc ineq1} επιτυγχάνεται, αν τα $\varepsilon_i$ διατηρηθούν φραγμένα, $i = 1, \ldots, p$, όπως διατυπώνεται και στην ακόλουθη πρόταση:

\begin{proposition}
    Αν $\varepsilon_i(t) \in \mathcal{L}_\infty$, $i = 1,\ldots,p$ για κάθε $t \geq 0$, τότε επιτυγχάνεται προδιαγεγραμμένη απόκριση όπως ορίζεται στην \cref{eq:ppc ineq1}.
\end{proposition}

\begin{proof}
    Εξ' υποθέσεως υπάρχουν θετικές σταθερές $\bar \varepsilon_i$, τέτοιες ώστε $\abs{\varepsilon_i(t)} \leq \bar \varepsilon_i $, $i = 1,\ldots,p$ για κάθε $t \geq 0$. Επομένως, με τη χρήση του αντίστροφου μετασχηματισμού $T^{-1}$, έχουμε ότι
    \begin{align*}
    -M_i < -M_i T_i^{-1} (\bar \varepsilon_i) 
        \leq \flatfrac{e_i(t)}{\rho_i(t)} 
        \leq T_i^{-1} (\bar \varepsilon_i) < 1
        \qc\qq*{αν} e_i(0) \geq 0,\\
    -1 < - T_i^{-1} (\bar \varepsilon_i) 
        \leq \flatfrac{e_i(t)}{\rho_i(t)} 
        \leq M_i T_i^{-1} (\bar \varepsilon_i) < M_i
        \qc\qq*{αν} e_i(0) \leq 0,
    \end{align*}
    Είναι εμφανές πως πολλαπλασιάζοντας με $\rho_i(t)$ καταλήγουμε στις σχέσεις \cref{eq:ppc ineq1}, αποδεικνύοντας έτσι την πρόταση.
\end{proof}

Επομένως, αρκεί να σχεδιάσουμε έναν ελεγκτή ο οποίος θα μπορεί να εγγυηθεί ότι $\varepsilon_i(t) \in \mathcal L_\infty$, $i = 1,\ldots, p$ για κάθε $t \geq 0$. Όμως αυτό δεν αποτελεί τον σκοπό αυτού του κεφαλαίου, αλλά θα υπάρξει η σχετική ανάλυση σε επόμενο κεφάλαιο. Τέλος, να σημειωθεί πως τα φράγματα $\bar \varepsilon_i$, $i = 1, \ldots, p$, των μετασχηματισμένων σφαλμάτων δεν επηρεάζουν τη διασφάλιση των προδιαγραφών απόκρισης, οι οποίες εκφράζονται μέσω των \cref{eq:ppc ineq1}, και συνεπώς εξαρτώνται από την επιλογή των συναρτήσεων $\rho_i(t)$ και των σταθερών $M_i$.